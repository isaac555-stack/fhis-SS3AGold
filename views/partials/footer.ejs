<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="/jquery-3.7.1.min.js"></script>

<script>
  // Mobile sidebar toggle
  (function() {
    const sidebar = document.getElementById('sidebar');
    const backdrop = document.getElementById('backdrop');
    const toggleBtn = document.querySelector('.menu-toggle');

    function openSidebar() {
      sidebar.classList.add('open');
      backdrop.classList.add('show');
      if (toggleBtn) toggleBtn.setAttribute('aria-expanded', 'true');
      document.body.style.overflow = 'hidden';
    }
    function closeSidebar() {
      sidebar.classList.remove('open');
      backdrop.classList.remove('show');
      if (toggleBtn) toggleBtn.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    }

    if (toggleBtn) {
      toggleBtn.addEventListener('click', () => {
        if (sidebar.classList.contains('open')) closeSidebar();
        else openSidebar();
      });
    }
    if (backdrop) backdrop.addEventListener('click', closeSidebar);

    // Close when any sidebar link is clicked (use event delegation)
    if (sidebar) {
      sidebar.addEventListener('click', (e) => {
        const a = e.target.closest('a');
        if (a) closeSidebar();
      });
    }

    // Close with Escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') closeSidebar();
    });
  })();
</script>

<script>
  const urlParams = new URLSearchParams(window.location.search)
  const successMessage = urlParams.get('success')
  const errorMessage = urlParams.get('error')

  if (successMessage) {
    Swal.fire({
      icon: 'success',
      title: 'Done!',
      text: successMessage,
      toast: true,
      position: 'top-end',
      timer: '5000',
      showConfirmButton: false,
      timerProgressBar: true
    })
  }

  if (errorMessage) {
    Swal.fire({
      icon: 'error',
      title: 'Oops',
      text: errorMessage,
    })
  }
</script>

</body>

</html>